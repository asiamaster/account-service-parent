<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.diligrp.xtrade.user.dao.IUserCardDao">
	
	<select id="selectList" resultType="com.diligrp.xtrade.user.domain.entity.UserCardEntity">
		SELECT
			`id`, 
			`account_id`, 
			`card_no`, 
			`category`, 
			`seinsweise`, 
			`system_disable_status`, 
			`status`, 
			`market_id`, 
			`created_time`, 
			`modified_time`
		FROM
			user_card
		ORDER BY
			id DESC
	</select>
	
	<insert id="save">
		INSERT INTO user_card (
			`id`, 
			`account_id`, 
			`card_no`, 
			`category`, 
			`seinsweise`, 
			`system_disable_status`, 
			`status`, 
			`market_id`, 
			`created_time`, 
			`modified_time`
		)
		VALUES (
			#{id}, 
			#{accountId}, 
			#{cardNo}, 
			#{category}, 
			#{seinsweise}, 
			#{systemDisableStatus}, 
			#{status}, 
			#{marketId}, 
			#{createdTime}, 
			#{modifiedTime}
		)
	</insert>
	
	<select id="getByIdCardNo" resultType="com.diligrp.xtrade.user.domain.entity.UserCardEntity">
		SELECT
			`id`, 
			`account_id`, 
			`card_no`, 
			`category`, 
			`seinsweise`, 
			`system_disable_status`, 
			`status`, 
			`market_id`, 
			`created_time`, 
			`modified_time`
		FROM
			user_card
		WHERE
			status != 4
		<if test="cardNo != null"> AND `card_no` = #{cardNo}</if>
		<if test="id != null"> AND `id` = #{id} </if>
	</select>
	
	<update id="update">
		UPDATE user_card
	 	<set>
			<if test="accountId != null">`account_id` = #{accountId}, </if>
			<if test="cardNo != null">`card_no` = #{cardNo}, </if>
			<if test="category != null">`category` = #{category}, </if>
			<if test="seinsweise != null">`seinsweise` = #{seinsweise}, </if>
			<if test="systemDisableStatus != null">`system_disable_status` = #{systemDisableStatus}, </if>
			<if test="status != null">`status` = #{status}, </if>
			<if test="marketId != null">`market_id` = #{marketId}, </if>
			<if test="createdTime != null">`created_time` = #{createdTime}, </if>
			<if test="modifiedTime != null">`modified_time` = #{modifiedTime}</if>
		</set>
		WHERE
			id = #{id}
	</update>
	
	
	<update id="updateByCardNo">
		UPDATE user_card
	 	<set>
			<if test="status != null">`status` = #{status}, </if>
			<if test="modifiedTime != null">`modified_time` = #{modifiedTime}</if>
		</set>
		WHERE
			status != 4
		AND
			card_no = #{cardNo}
	</update>

	<update id="updateByAccountId">
		UPDATE user_card
	 	<set>
			<if test="status != null">`status` = #{status}, </if>
			<if test="modifiedTime != null">`modified_time` = #{modifiedTime}</if>
		</set>
		WHERE
			status != 4
		AND
			account_id = #{accountId}
	</update>

</mapper>